CREATE TABLE prms.patient_record (
  P_id INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(100) NOT NULL UNIQUE,
  Date_of_Birth DATE NOT NULL,
  Age INT NOT NULL,
  Contact VARCHAR(20),
  Gender VARCHAR(6),
  Address VARCHAR(255),
  Next_Appointment DATE,
  Medical_History TEXT,
  `timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  INDEX (Name) 
);

CREATE TABLE prms.patient_information (
  PR_id INT PRIMARY KEY AUTO_INCREMENT,
  P_id INT NOT NULL,
  Name VARCHAR(100) NOT NULL,
  D_id INT,
  Date DATE NOT NULL,
  Record_Category VARCHAR(50) NOT NULL,
  Record_Type VARCHAR(50) NOT NULL,
  Record_File VARCHAR(255) NOT NULL,
  Description TEXT,
  FOREIGN KEY (P_id) REFERENCES patient_record(P_id),
  FOREIGN KEY (Name) REFERENCES patient_record(Name)
);




USE prms;
-- Inserting a patient record
INSERT INTO prms.patient_record (Name, Date_of_Birth, Age, Contact, Address, Next_Appointment, Medical_History)
VALUES ('John Doe', '1990-05-15', 32, '1234567890', '123 Main St, City', '2024-04-15', 'No significant medical history');

-- Retrieving the ID of the inserted patient
SELECT P_id FROM prms.patient_record WHERE Name = 'John Doe';

-- Assuming the above query returned P_id = 1, inserting patient information
INSERT INTO prms.patient_information (P_id, Name, D_id, Date, Record_Category, Record_Type, Record_File, Description)
VALUES (1, 'John Doe', NULL, '2024-04-01', 'Consult', 'Prescription', 'https://s3.example.com/prescription.pdf', 'Prescription for headache');

-- Retrieving patient information
SELECT * FROM prms.patient_information WHERE P_id = 1;
